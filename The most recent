<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>åœ°çƒã‹ã‚‰æ¢æ¤œã™ã‚‹å¤ªé™½ç³»</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
  html,body{margin:0;overflow:hidden;background:#000;font-family:system-ui,-apple-system,BlinkMacSystemFont;}
  .ui{
    position:fixed;top:16px;left:16px;display:flex;gap:10px;align-items:center;
    padding:12px 14px;border-radius:16px;color:#fff;
    backdrop-filter:blur(14px);
    background:rgba(255,255,255,.12);
    box-shadow:0 10px 30px rgba(0,0,0,.45);
  }
  .ui button{
    border:none;border-radius:999px;padding:8px 14px;color:#fff;
    background:rgba(255,255,255,.18);cursor:pointer
  }
  .ui button:hover{background:rgba(255,255,255,.32)}
  .ui input[type="range"]{width:120px}
  .hint{
    position:fixed;bottom:18px;left:50%;transform:translateX(-50%);
    color:#cfd8ff;font-size:12px;opacity:.9
  }
  .panel{
    position:fixed;right:16px;top:16px;max-width:280px;color:#fff;
    padding:14px;border-radius:16px;display:none;
    backdrop-filter:blur(14px);
    background:rgba(20,30,80,.25);
    box-shadow:0 10px 30px rgba(0,0,0,.45);
  }
  .panel h3{margin:.2em 0 .4em}
  .panel small{opacity:.85}
</style>
</head>
<body>

<div class="ui">
  <button id="toggle">å…¬è»¢ åœæ­¢</button>
  <label>é€Ÿåº¦ <input id="speed" type="range" min="0.2" max="5" step="0.1" value="1"></label>
</div>
<div class="panel" id="info"></div>
<div class="hint">ğŸ–± ãƒ›ã‚¤ãƒ¼ãƒ«ï¼ğŸ¤ ãƒ”ãƒ³ãƒã§æ‹¡å¤§ãƒ»æƒ‘æ˜Ÿã‚¯ãƒªãƒƒã‚¯ã§æ¥è¿‘</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.155/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.155/examples/js/controls/OrbitControls.js"></script>

<script>
/* ===== åŸºæœ¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— ===== */
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x000000);

const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 2000);
camera.position.set(0, 2.8, 10); // åœ°çƒè¦–ç‚¹ã£ã½ãä½ã‚

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(Math.min(devicePixelRatio,2));
document.body.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.minDistance = 1.8;
controls.maxDistance = 300;

/* ===== å…‰ ===== */
scene.add(new THREE.AmbientLight(0xffffff,.35));
const sunLight = new THREE.PointLight(0xffffff,2.2,0);
scene.add(sunLight);

/* ===== èƒŒæ™¯æ˜Ÿ ===== */
const starsGeo = new THREE.BufferGeometry();
const starCount = 4000;
const pos = new Float32Array(starCount*3);
for(let i=0;i<starCount*3;i++) pos[i]=(Math.random()-.5)*1200;
starsGeo.setAttribute('position', new THREE.BufferAttribute(pos,3));
scene.add(new THREE.Points(starsGeo, new THREE.PointsMaterial({size:1,color:0xffffff})));

/* ===== å¤ªé™½ ===== */
const sun = new THREE.Mesh(
  new THREE.SphereGeometry(1.6,64,64),
  new THREE.MeshBasicMaterial({color:0xffcc44})
);
scene.add(sun);

/* ===== ãƒ†ã‚¯ã‚¹ãƒãƒ£ ===== */
const L = new THREE.TextureLoader();

/* ===== æƒ‘æ˜Ÿãƒ‡ãƒ¼ã‚¿ï¼ˆæ•™è‚²ç”¨é€”ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹å…¬é–‹é…å¸ƒãƒ†ã‚¯ã‚¹ãƒãƒ£ï¼‰ ===== */
const DATA = [
 {name:'Earth', size:.62, dist:6.2, sp:.010, tex:'https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg',
  info:'åœ°çƒã€‚æ°´ã¨å¤§æ°—ãŒè±Šå¯Œã€‚ç”Ÿå‘½ãŒç¢ºèªã•ã‚Œã¦ã„ã‚‹å”¯ä¸€ã®æƒ‘æ˜Ÿã€‚'},
 {name:'Mars', size:.45, dist:9.4, sp:.008, tex:'https://threejs.org/examples/textures/planets/mars_1024.jpg',
  info:'ç«æ˜Ÿã€‚èµ¤ã„åœ°è¡¨ã€‚ã‹ã¤ã¦æ°´ãŒå­˜åœ¨ã—ãŸç—•è·¡ãŒã‚ã‚‹ã€‚'},
 {name:'Jupiter', size:1.2, dist:14.5, sp:.006, tex:'https://threejs.org/examples/textures/planets/jupiter.jpg',
  info:'æœ¨æ˜Ÿã€‚æœ€å¤§ã®ã‚¬ã‚¹æƒ‘æ˜Ÿã€‚å¤§èµ¤æ–‘ãŒæœ‰åã€‚'}
];

const planets=[];
DATA.forEach(d=>{
  const m = new THREE.Mesh(
    new THREE.SphereGeometry(d.size,64,64),
    new THREE.MeshStandardMaterial({map:L.load(d.tex)})
  );
  m.userData={...d, a:Math.random()};
  scene.add(m); planets.push(m);
});

/* ===== å½—æ˜Ÿ ===== */
let comet=null;
function spawnComet(){
  const g=new THREE.SphereGeometry(.12,16,16);
  const m=new THREE.MeshBasicMaterial({color:0xffffff});
  comet=new THREE.Mesh(g,m);
  comet.position.set(-200, (Math.random()-.5)*30, (Math.random()-.5)*30);
  scene.add(comet);
}
setInterval(()=>{ if(!comet) spawnComet(); },8000);

/* ===== ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ ===== */
const ray=new THREE.Raycaster(), mouse=new THREE.Vector2();
let hover=null;
window.addEventListener('pointermove',e=>{
  mouse.x=(e.clientX/innerWidth)*2-1;
  mouse.y=-(e.clientY/innerHeight)*2+1;
});
window.addEventListener('click',()=>{
  if(hover){
    controls.target.copy(hover.position);
    camera.position.lerp(
      hover.position.clone().add(new THREE.Vector3(0, hover.userData.size*1.8, hover.userData.size*4)),
      .35
    );
    showInfo(hover.userData);
  }
});

const infoEl=document.getElementById('info');
function showInfo(d){
  infoEl.innerHTML=`<h3>${d.name}</h3><small>${d.info}</small>`;
  infoEl.style.display='block';
}

/* ===== UI ===== */
let running=true, speedMul=1;
document.getElementById('toggle').onclick=()=>{
  running=!running;
  toggle.textContent= running?'å…¬è»¢ åœæ­¢':'å…¬è»¢ é–‹å§‹';
};
document.getElementById('speed').oninput=e=> speedMul=+e.target.value;

/* ===== ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ===== */
function animate(){
  requestAnimationFrame(animate);

  // æƒ‘æ˜Ÿå…¬è»¢
  if(running){
    planets.forEach(p=>{
      p.userData.a+=p.userData.sp*speedMul;
      p.position.set(
        Math.cos(p.userData.a)*p.userData.dist,
        0,
        Math.sin(p.userData.a)*p.userData.dist
      );
      p.rotation.y+=.002;
    });
  }

  // å½—æ˜Ÿç§»å‹•
  if(comet){
    comet.position.x+=2.5;
    if(comet.position.x>200){
      scene.remove(comet); comet=null;
    }
  }

  // ãƒ›ãƒãƒ¼ç™ºå…‰
  ray.setFromCamera(mouse,camera);
  const hit=ray.intersectObjects(planets)[0];
  if(hit?.object!==hover){
    if(hover) hover.material.emissive?.set(0x000000);
    hover=hit?.object||null;
    if(hover){
      hover.material.emissive=new THREE.Color(0x3344ff);
      hover.material.emissiveIntensity=.35;
    }
  }

  controls.update();
  renderer.render(scene,camera);
}
animate();

addEventListener('resize',()=>{
  camera.aspect=innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
